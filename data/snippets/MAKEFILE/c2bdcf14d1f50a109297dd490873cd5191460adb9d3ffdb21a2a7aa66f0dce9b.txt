# This is a makefile for a project
# It includes various rules and dependencies to build the project

# Set the compiler to be used
CC=gcc

# Set the linker to be used
LD=ld

# Define the source files
SOURCES=$(wildcard src/*.c)

# Define the object files
OBJECTS=$(patsubst src/%.c, obj/%.o, $(SOURCES))

# Define the target executable
EXECUTABLE=bin/my_project

# Default rule, will be executed if no target is specified
all: $(EXECUTABLE)

# Rule to build the executable by linking the object files
$(EXECUTABLE): $(OBJECTS)
	$(CC) $^ -o $@

# Rule to build each object file from the corresponding source file
obj/%.o: src/%.c
	$(CC) -c $< -o $@

# Clean rule, deletes all generated files
clean:
	rm -f $(OBJECTS) $(EXECUTABLE)

# Dependency rule, includes all header files
depend: $(SOURCES)
	$(CC) -MM $^ > dependencies.txt

# Include dependencies generated by 'depend' rule
include dependencies.txt