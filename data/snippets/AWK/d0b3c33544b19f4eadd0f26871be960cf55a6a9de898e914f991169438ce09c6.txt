/^([A-Z]+)\[\[([A-Z0-9]+)\]\]((\[[0-9]+\])*[[:space:]]*([A-Z]+)[[:space:]]*(.*))?$/{NEEDTOCOMPAREAT=$(NF-1)} /\[\[([A-Z0-9]+)\]\][$]/ {if (NEEDTOCOMPAREAT == $2) {print $1;}} prohibit:END {print("This is the end of the program");}