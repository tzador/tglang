^(?:([A-Za-z]+):)?\/\/(?:(?<username>[^@:\n]+)(?:[:]?)(?<password>[^@:\n]+)?@)?(?<hostname>[^:/\n]+)(?::(?<port>[0-9]+))?(?<path>(?:\/[^?\n]*)*)\??(?<query>(?:[^%\n]*)*)#?(?<fragment>\w*)$