(defmacro defclass (&whole class rest)
  "Defines a new class with the given name and superclass."
  (let ((name (first rest))
        (superclass (second rest))
        (slots (third rest)))
    (if (listp slots)
        `(let ((name ',name))
           '(defclass name (,superclass)
              ,@slots)))
        `(let ((name ',name)
               (slots ',slots))
          '(defclass name (,superclass)
             ,@slots)))))