plugins {
    // applies Java plugin which will allow us to build a Java project
    id 'java'
    // applies the idea plugin which will generate config files for IntelliJ IDEA
    id 'idea'
    // applies the jacoco plugin which will generate test coverage reports
    id "jacoco"
    // applies the checkstyle plugin which will enforce code style guidelines
    id 'checkstyle'
}
// configures the Java plugin
java {
    // specifies the source and target compatibility for our project
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
    // specifies where to find Java source code
    sourceSets {
        // the main source set
        main {
            // specifies the source directory
            java {
                srcDirs = ['src/main/java']
            }
        }
        // the test source set
        test {
            // specifies the source directory
            java {
                srcDirs = ['src/test/java']
            }
        }
    }
}
// configures the jacoco plugin
jacoco {
    // tells jacoco to generate a report
    reports {
        // specifies the output directory for the report
        xml.enabled true
        xml.destination "build/reports/jacoco/test/jacocoTestReport.xml"
        // specifies the report format
        html.enabled true
        html.destination "build/reports/jacoco/test/jacocoTestReport.html"
    }
    // excludes some classes from the coverage report
    // these classes are mostly auto-generated by the IDE and do not contribute to code coverage
    excludes ["**/Configurations/**", "**/build/**", "**/test/**", "Test*.class", "**/*Test.*"]
}
// configures the checkstyle plugin
checkstyle {
    // specifies the config file to use
    config_file = file("${rootDir}/config/checkstyle/checkstyle.xml")
    // specifies the source directory for files to check
    sourceSets = [sourceSets.main]
}