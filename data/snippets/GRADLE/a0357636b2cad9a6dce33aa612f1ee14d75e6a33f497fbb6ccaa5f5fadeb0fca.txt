plugins {
    id 'java'
    id 'maven-publish'
}

// Defines the publishing settings
publishing {
    publications {
        // Adds a new Maven publication named 'mavenJava'
        mavenJava(MavenPublication) {
            // Specifies the details of the publication
            from components.java

            // Adds the sourceJar task to the publication
            artifact(sourceJar)

            // Configures the publication to include any additional artifacts
            // generated by the assemble task
            additionalArtifacts = [artifacts.main, artifacts.test]

            // Specifies the group and version of the publication
            groupId = 'com.example'
            version = '1.0.0'

        }
    }

    // Configures the repositories where the publication will be published to
    repositories {
        maven {
            // Specifies the URL to publish to
            url "https://example.com/maven-repo/"

            // Specifies the credentials for publishing to the repository
            credentials {
                username "username"
                password "password"
            }
        }
    }
}

// Defines tasks for generating and publishing source JARs
task sourceJar(type: Jar, dependsOn: classes) {
    // Specifies the source files to include in the JAR
    from sourceSets.main.allJava
}

// Configures the project to use the JUnit 5 testing framework
dependencies {
    // Includes the JUnit 5 API and Engine dependencies
    testImplementation("org.junit.jupiter:junit-jupiter-api:5.7.0")
    testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:5.7.0")
}

// Specifies test options for JUnit 5
test {
    // Specifies the test engine to use
    useJUnitPlatform()
    // Configures the test logging
    testLogging {
        // Specifies the log level
        events 'passed', 'skipped', 'failed'
    }
}