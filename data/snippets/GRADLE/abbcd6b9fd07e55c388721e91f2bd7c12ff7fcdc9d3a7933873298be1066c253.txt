plugins {
    id 'java'
    id 'application'
    id 'com.github.johnrengelman.shadow' version '6.1.0' //imports the Shadow plugin with version 6.1.0
}

repositories {
    mavenCentral()
}

dependencies {
    //imports Google's Guava library with version 30.0-jre
    implementation 'com.google.guava:guava:30.0-jre'
    //imports JUnit library with version 4.12 and marks it as a test dependency
    testImplementation 'junit:junit:4.12'
}

application {
    //sets the main class for the application
    mainClassName = 'com.example.Main'
    //sets the application's arguments 
    applicationDefaultJvmArgs = ['-Xmx1024m']
}

shadowJar {
    //sets the name of the jar file generated by the Shadow plugin
    archiveFileName = 'myApp.jar'
    //adds a manifest entry for the main class
    mergeServiceFiles {
        include 'META-INF/services/com.example.Main'
    }
}

tasks.withType(JavaCompile) {
    //configures the compiler to target Java version 11
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}

test {
    //configures the test task to use JUnit 4
    useJUnit()
}

run {
    //allows the application to be run with arguments
    args 'arg1', 'arg2'
}