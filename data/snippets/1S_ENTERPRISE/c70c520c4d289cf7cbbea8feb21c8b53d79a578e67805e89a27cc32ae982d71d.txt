# Структура заказа - Order
# Описание полей заказа
Структура Заказ - структура
    # Идентификатор заказа
    ИдентификаторЗаказа   - строка
    # Дата создания заказа
    Дата                 - дата
    # Статус заказа
    СтатусЗаказа         - перечисление: Создан, ВОбработке, Готов, Доставлен
    # Клиент, сделавший заказ
    Клиент               - ссылка на Клиенты
    # Перечень товаров в заказе
    Товары               - табличное поле
        # Артикул товара
        Артикул         - строка
        # Название товара
        Наименование    - строка
        # Количество товара
        Количество      - число
        # Цена товара
        Цена            - число
        # Сумма по товару
        Сумма           - число
        
# Процедура создания заказа
Процедура СоздатьЗаказ(Клиент, Товары) Экспорт
    # Создаем структуру заказа
    Заказ = Новый Структура("Заказ")
    # Заполняем поля заказа
    Заказ.ИдентификаторЗаказа = СтрЗаменить(UUID, "-", "")
    Заказ.Дата = ТекущаяДата();
    Заказ.СтатусЗаказа = СтатусыЗаказов.Создан;
    Заказ.Клиент = Клиент;
    # Создаем табличное поле с товарами
    Заказ.Товары = Новый ТабличныйДокумент;
    # Добавляем колонки в табличное поле
    Заказ.Товары.Колонки.Добавить("Артикул");
    Заказ.Товары.Колонки.Добавить("Наименование");
    Заказ.Товары.Колонки.Добавить("Количество");
    Заказ.Товары.Колонки.Добавить("Цена");
    Заказ.Товары.Колонки.Добавить("Сумма");
    # Заполняем таблицу товарами
    Товары.Сбросить();
    Пока Товары.Следующий() Цикл
        # Добавляем строку в таблицу
        Заказ.Товары.Добавить();
        Заказ.Товары["Артикул"] = Товары.Артикул;
        Заказ.Товары["Наименование"] = Товары.Наименование;
        Заказ.Товары["Количество"] = Товары.Количество;
        Заказ.Товары["Цена"] = Товары.Цена;
        Заказ.Товары["Сумма"] = Товары.Количество * Товары.Цена;
    КонецЦикла;
    # Возвращаем созданный заказ
    Возврат Заказ;
КонецПроцедуры