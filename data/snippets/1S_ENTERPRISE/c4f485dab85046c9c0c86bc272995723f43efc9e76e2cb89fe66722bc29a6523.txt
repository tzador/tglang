// Declare variables
Количество = 0;
Продукт = Новый ИтогодняяПокупкаТовара;
Клиент = Новый ИзготовительКлиент;

// Create a new sale document
Продажа = Новый Документ.ПокупкаЛицензий(Клиент);

// Add products to the sale and calculate total price
Продажа.ДобавитьТовар(Продукт, 1);
Количество = Количество + 1;
Сумма = Продажа.Сумма();

// Generate invoice for the sale
СчетНаОплату = Новый Документ.СчетНаОплату(Клиент, Сумма);

// Save the sale document
Продажа.Записать();

// Print list of sold products and invoice
Сообщить("Продано " + Количество + " единиц товара " + Продукт.Наименование);
Сообщить("Сумма к оплате за товар: " + Сумма);
Сообщить("Выставлен счет на оплату за товар: " + СчетНаОплату.Номер);

// Perform payment for the invoice
Продажа.ОплатитьДокумент(СчетНаОплату, Сумма);

// Update client's balance
Клиент.Баланс = Клиент.Баланс - Сумма;

// Save changes to the client's profile
Клиент.Записать();